<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

<f:view locale="#{localeModel.currentLocale}"/>
<h:head>
    <title>#{msg['displayTitle']}</title>
    <h:outputStylesheet library="styles" name="main.css"/>
    <h:outputStylesheet library="styles" name="jviewer.css"/>
    <h:outputScript library="scripts" name="char_admin.js"/>
</h:head>

<h:body>
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('en')}">
            <h:graphicImage library="images" name="us_logo.png"/>
        </h:commandLink>
    </h:form>
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('ru')}">
            <h:graphicImage library="images" name="ru_logo.png"/>
        </h:commandLink>
    </h:form>
        <h:form id="displayForm">
            #{msg['currentRoomMessage']}: <h:outputText value="#{userModel.currentRoom} "/>
            <p:commandButton value="#{msg['executeButton']}" actionListener="#{(systemModel.loadCurrentScreen(userModel.currentRoom)).executeCode}" update="output"/>
            <p:commandButton value="#{msg['clearIoButton']}" actionListener="#{(systemModel.loadCurrentScreen(userModel.currentRoom)).clearIO}" update="output, input"/>
            <p:commandButton value="#{msg['roomsButton']}" action="admin?faces-redirect=true"/>
            <p:commandButton value="#{msg['logoutButton']}" action="#{loginController.logout}"/>
            <pe:codeMirror id="input" mode="xml" readOnly="false" theme="eclipse" lineNumbers="true" lineWrapping="true" matchBrackets="true" value="#{(systemModel.loadCurrentScreen(userModel.currentRoom)).input}"/>
            <br/>
            <h:outputText id="output" value="#{(systemModel.loadCurrentScreen(userModel.currentRoom)).output}" escape="false"/>
            <p:poll interval="1" listener="#{(systemModel.loadCurrentScreen(userModel.currentRoom)).updateInput}"/>
        </h:form>
</h:body>

</html>